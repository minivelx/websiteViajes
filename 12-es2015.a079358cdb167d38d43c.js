(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{dgGR:function(t,e,n){"use strict";n.r(e),n.d(e,"MisViajesPageModule",(function(){return Z}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),c=n("tyNb"),b=n("mrSG"),r=n("BEOd"),l=n("+Qoh"),s=n("BsNa"),u=n("G7hY"),d=n("ypJn"),p=n("YxHF"),h=n("fXoL"),m=n("BQIx"),O=n("ova0"),P=n("+nHt"),f=n("JmBq"),g=n("FdPp");function v(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.zc(4,"Clientes"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.rc(t),h.Zb(),h.pc(17).close()})),h.Kb(6,"ion-icon",16),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function C(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.zc(4,"Camiones"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.rc(t),h.Zb(),h.pc(17).close()})),h.Kb(6,"ion-icon",16),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function y(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.zc(4,"Conductores"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.rc(t),h.Zb(),h.pc(29).close()})),h.Kb(6,"ion-icon",16),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function x(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.zc(4,"Auxiliares"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.rc(t),h.Zb(),h.pc(35).close()})),h.Kb(6,"ion-icon",16),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function M(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.zc(4,"Origen"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.rc(t),h.Zb(),h.pc(41).close()})),h.Kb(6,"ion-icon",16),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function j(t,e){if(1&t){const t=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.zc(4,"Destino"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.rc(t),h.Zb(),h.pc(47).close()})),h.Kb(6,"ion-icon",16),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}let z=(()=>{class t extends r.a{constructor(t,e,n,i,o){super(t,e,n,i,o),this.getService=t,this.postService=e,this.putService=n,this.toastCtrl=i,this.modalCtrl=o,this.url="viajes",this.urlClientes="clientes",this.urlCamiones="camiones",this.urlConductores="account/listarPorRol/conductor",this.urlAuxiliares="account/listarPorRol/auxiliar",this.urlOrigenDestinoCliente="sedes/PorCliente/",this.viaje=new u.a,this.cliente=new s.a,this.camion=new l.a,this.conductor=new p.a,this.auxiliar=new p.a,this.origen=new d.a,this.destino=new d.a}ngOnInit(){null!=this.id&&super.consumirGet(this.url+"/"+this.id).then(t=>{this.viaje=t,this.cliente=t.cliente,this.camion=t.camion,this.conductor=t.conductor,this.auxiliar=t.auxiliar,this.origen=t.sedeOrigen,this.destino=t.sedeDestino,this.fecha=t.fecha,this.destino.nombre=t.sedeOrigen.direccion,this.habilidato="Finalizado"===this.viaje.estado})}acutalizarViaje(){const t=Object.create(null,{consumirPost:{get:()=>super.consumirPost}});return Object(b.a)(this,void 0,void 0,(function*(){null!==this.viaje.inicioRuta&&null!==this.viaje.finRuta||t.consumirPost.call(this,this.url+"/actualizarEstado",this.viaje).then(t=>{})}))}crearviaje(){this.viaje.idCliente=this.cliente.id,this.viaje.idOrigen=this.origen.id,this.viaje.idDestino=this.destino.id,this.viaje.idCamion=this.camion.id,this.viaje.idConductor=this.conductor.id,this.viaje.idAuxiliar=null==this.auxiliar?null:this.auxiliar.id,this.viaje.fecha=this.fecha,console.log(this.viaje),this.postService.post(this.url,this.viaje).subscribe(t=>Object(b.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:t.message,position:"middle",duration:t.success?3e3:0,color:t.success?"success":"danger",buttons:t.success?[]:[{text:"Aceptar",role:"cancel"}]})).present(),t.success&&this.dismiss(t)})),t=>Object(b.a)(this,void 0,void 0,(function*(){this.showModalError(t)})))}dismiss(t){this.modalCtrl.dismiss(t)}showModalError(t){return Object(b.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:t,position:"middle",color:"danger",buttons:[{text:"Aceptar",role:"cancel"}]})).present(),console.log(t)}))}}return t.\u0275fac=function(e){return new(e||t)(h.Jb(m.a),h.Jb(O.a),h.Jb(P.a),h.Jb(a.Q),h.Jb(a.J))},t.\u0275cmp=h.Db({type:t,selectors:[["app-detalle-viaje"]],inputs:{id:"id"},features:[h.vb],decls:63,vars:23,consts:[[1,"modal-title"],["fill","clear","color","dark",3,"click"],["name","close-outline"],[1,"ion-padding"],["placeholder","Fecha Programada","displayFormat","YYYY/MM/DD h:mm A",3,"ngModel","ngModelChange"],["itemValueField","id","itemTextField","nombre",3,"ngModel","items","canSearch","ngModelChange"],["portComponent",""],["ionicSelectableHeaderTemplate",""],["itemValueField","id","itemTextField","placa",3,"ngModel","items","canSearch","ngModelChange"],["portComponent1",""],["portComponent2",""],["portComponent3",""],["portComponent4",""],["type","number",3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],[3,"click"],["name","close-circle",2,"font-size","24px"]],template:function(t,e){1&t&&(h.Pb(0,"ion-header"),h.Pb(1,"ion-toolbar"),h.Pb(2,"ion-title"),h.Pb(3,"div",0),h.Pb(4,"span"),h.zc(5,"Detalle del Viaje"),h.Ob(),h.Pb(6,"ion-button",1),h.Xb("click",(function(){return e.dismiss(null)})),h.Kb(7,"ion-icon",2),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Pb(8,"ion-content",3),h.Pb(9,"ion-item"),h.Pb(10,"ion-label"),h.zc(11,"Fecha"),h.Ob(),h.Pb(12,"ion-datetime",4),h.Xb("ngModelChange",(function(t){return e.fecha=t})),h.Ob(),h.Ob(),h.Pb(13,"ion-item"),h.Pb(14,"ion-label"),h.zc(15,"Cliente"),h.Ob(),h.Pb(16,"ionic-selectable",5,6),h.Xb("ngModelChange",(function(t){return e.cliente=t})),h.xc(18,v,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(19,"ion-item"),h.Pb(20,"ion-label"),h.zc(21,"Placa"),h.Ob(),h.Pb(22,"ionic-selectable",8,6),h.Xb("ngModelChange",(function(t){return e.camion=t})),h.xc(24,C,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(25,"ion-item"),h.Pb(26,"ion-label"),h.zc(27,"Conductor"),h.Ob(),h.Pb(28,"ionic-selectable",5,9),h.Xb("ngModelChange",(function(t){return e.conductor=t})),h.xc(30,y,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(31,"ion-item"),h.Pb(32,"ion-label"),h.zc(33,"Auxiliar"),h.Ob(),h.Pb(34,"ionic-selectable",5,10),h.Xb("ngModelChange",(function(t){return e.auxiliar=t})),h.xc(36,x,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(37,"ion-item"),h.Pb(38,"ion-label"),h.zc(39,"Origen"),h.Ob(),h.Pb(40,"ionic-selectable",5,11),h.Xb("ngModelChange",(function(t){return e.origen=t})),h.xc(42,M,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(43,"ion-item"),h.Pb(44,"ion-label"),h.zc(45,"Destino"),h.Ob(),h.Pb(46,"ionic-selectable",5,12),h.Xb("ngModelChange",(function(t){return e.destino=t})),h.xc(48,j,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(49,"ion-item"),h.Pb(50,"ion-label"),h.zc(51,"Valor Anticipo"),h.Ob(),h.Pb(52,"ion-input",13),h.Xb("ngModelChange",(function(t){return e.viaje.valorAnticipo=t})),h.Ob(),h.Ob(),h.Pb(53,"ion-item"),h.Pb(54,"ion-label"),h.zc(55,"N\xfamero Manifiesto"),h.Ob(),h.Pb(56,"ion-input",14),h.Xb("ngModelChange",(function(t){return e.viaje.numeroManifiesto=t})),h.Ob(),h.Ob(),h.Pb(57,"ion-item"),h.Pb(58,"ion-label"),h.zc(59,"N\xfamero Cuenta"),h.Ob(),h.Pb(60,"ion-input",14),h.Xb("ngModelChange",(function(t){return e.viaje.numeroCuenta=t})),h.Ob(),h.Ob(),h.Pb(61,"ion-button",15),h.Xb("click",(function(){return e.acutalizarViaje()})),h.zc(62),h.Ob(),h.Ob()),2&t&&(h.yb(12),h.fc("ngModel",e.fecha),h.yb(4),h.fc("ngModel",e.cliente)("items",e.clientes)("canSearch",!0),h.yb(6),h.fc("ngModel",e.camion)("items",e.camiones)("canSearch",!0),h.yb(6),h.fc("ngModel",e.conductor)("items",e.conductores)("canSearch",!0),h.yb(6),h.fc("ngModel",e.auxiliar)("items",e.auxiliares)("canSearch",!0),h.yb(6),h.fc("ngModel",e.origen)("items",e.origenesDestinos)("canSearch",!0),h.yb(6),h.fc("ngModel",e.destino)("items",e.origenesDestinos)("canSearch",!0),h.yb(6),h.fc("ngModel",e.viaje.valorAnticipo),h.yb(4),h.fc("ngModel",e.viaje.numeroManifiesto),h.yb(4),h.fc("ngModel",e.viaje.numeroCuenta),h.yb(2),h.Ac("Sin Iniciar"==e.viaje.estado?"Iniciar":"Finalizar"))},directives:[a.m,a.E,a.D,a.c,a.n,a.g,a.r,a.u,a.h,a.O,o.h,o.j,f.a,g.a,a.q,a.L,a.P],styles:[".modal-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.modal-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();var w=n("RyMC"),X=n("rEr+"),A=n("7zfz"),D=n("jIHw");function S(t,e){if(1&t){const t=h.Qb();h.Pb(0,"tr"),h.Pb(1,"th",6),h.zc(2,"Fecha "),h.Kb(3,"p-sortIcon",7),h.Ob(),h.Pb(4,"th",8),h.zc(5,"Placa "),h.Kb(6,"p-sortIcon",9),h.Ob(),h.Pb(7,"th",10),h.zc(8,"Auxiliar "),h.Kb(9,"p-sortIcon",11),h.Ob(),h.Pb(10,"th",12),h.zc(11,"Cliente "),h.Kb(12,"p-sortIcon",13),h.Ob(),h.Pb(13,"th",14),h.zc(14,"Origen "),h.Kb(15,"p-sortIcon",15),h.Ob(),h.Pb(16,"th",16),h.zc(17,"Destino "),h.Kb(18,"p-sortIcon",17),h.Ob(),h.Pb(19,"th",16),h.zc(20,"Estado "),h.Kb(21,"p-sortIcon",18),h.Ob(),h.Pb(22,"th",19),h.zc(23,"Acciones"),h.Ob(),h.Ob(),h.Pb(24,"tr"),h.Pb(25,"th"),h.Pb(26,"input",20),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"fecha","contains")})),h.Ob(),h.Ob(),h.Pb(27,"th"),h.Pb(28,"input",21),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"placa","contains")})),h.Ob(),h.Ob(),h.Pb(29,"th"),h.Pb(30,"input",22),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"nombreAuxiliar","contains")})),h.Ob(),h.Ob(),h.Pb(31,"th"),h.Pb(32,"input",23),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"nombreCliente","contains")})),h.Ob(),h.Ob(),h.Pb(33,"th"),h.Pb(34,"input",24),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"nombreOrigen","contains")})),h.Ob(),h.Ob(),h.Pb(35,"th"),h.Pb(36,"input",25),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"nombreDestino","contains")})),h.Ob(),h.Ob(),h.Pb(37,"th"),h.Pb(38,"input",26),h.Xb("input",(function(e){return h.rc(t),h.Zb(),h.pc(9).filter(e.target.value,"estado","contains")})),h.Ob(),h.Ob(),h.Ob()}}function I(t,e){if(1&t){const t=h.Qb();h.Pb(0,"tr"),h.Pb(1,"td"),h.Pb(2,"span",27),h.zc(3,"Fecha "),h.Ob(),h.zc(4),h.ac(5,"date"),h.Ob(),h.Pb(6,"td"),h.Pb(7,"span",27),h.zc(8,"Placa "),h.Ob(),h.zc(9),h.Ob(),h.Pb(10,"td"),h.Pb(11,"span",27),h.zc(12,"Auxiliar "),h.Ob(),h.zc(13),h.Ob(),h.Pb(14,"td"),h.Pb(15,"span",27),h.zc(16,"Cliente "),h.Ob(),h.zc(17),h.Ob(),h.Pb(18,"td"),h.Pb(19,"span",27),h.zc(20,"Origen "),h.Ob(),h.zc(21),h.Ob(),h.Pb(22,"td"),h.Pb(23,"span",27),h.zc(24,"Destino "),h.Ob(),h.zc(25),h.Ob(),h.Pb(26,"td"),h.Pb(27,"span",27),h.zc(28,"Estado "),h.Ob(),h.zc(29),h.Ob(),h.Pb(30,"td",28),h.Pb(31,"p-button",29),h.Xb("click",(function(){h.rc(t);const n=e.$implicit;return h.Zb().mostrarModal(n.id)})),h.Ob(),h.Ob(),h.Ob()}if(2&t){const t=e.$implicit;h.yb(4),h.Ac(h.bc(5,7,t.fecha,"dd/MM/yyyy h:mm")),h.yb(5),h.Ac(t.placa),h.yb(4),h.Ac(t.nombreAuxiliar),h.yb(4),h.Ac(t.nombreCliente),h.yb(4),h.Ac(t.nombreOrigen),h.yb(4),h.Ac(t.nombreDestino),h.yb(4),h.Ac(t.estado)}}const k=function(){return[10,25,50]},F=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,n){super(t,null,null,e,n),this.getService=t,this.toastCtrl=e,this.modalCtrl=n,this.url="viajes/misViajes",this.viajes=[]}ngOnInit(){this.obtenerViajes()}obtenerViajes(){super.consumirGet(this.url).then(t=>{this.viajes=t})}mostrarModal(t){return Object(b.a)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:z,componentProps:{id:t},backdropDismiss:!1,cssClass:"long-modal"});e.present(),yield e.onWillDismiss().then(t=>{null!=t.data&&t.data.success&&this.obtenerViajes()})}))}}return t.\u0275fac=function(e){return new(e||t)(h.Jb(m.a),h.Jb(a.Q),h.Jb(a.J))},t.\u0275cmp=h.Db({type:t,selectors:[["app-mis-viajes"]],features:[h.vb],decls:12,vars:7,consts:[["slot","start"],[1,"ion-padding"],["exportFilename","viajes","styleClass","p-datatable-striped p-datatable-responsive-demo","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros",3,"columns","value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","Fecha"],["field","fecha"],["pSortableColumn","Placa"],["field","placa"],["pSortableColumn","Auxiliar"],["field","nombreAuxiliar"],["pSortableColumn","Cliente"],["field","nombreCliente"],["pSortableColumn","Origen"],["field","nombreOrigen"],["pSortableColumn","Destino"],["field","nombreDestino"],["field","estado"],["rowspan","2",1,"action-column"],["pInputText","","type","text","placeholder","Buscar por Fecha",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Placa",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Auxiliar",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Cliente",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Origen",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Destino",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Estado",1,"p-column-filter",3,"input"],[1,"p-column-title"],[1,"action-column"],["label","Ver","icon","pi pi-pencil","iconPos","left",1,"primary-button",3,"click"]],template:function(t,e){1&t&&(h.Pb(0,"ion-header"),h.Pb(1,"ion-toolbar"),h.Pb(2,"ion-buttons",0),h.Kb(3,"ion-menu-button"),h.Ob(),h.Pb(4,"ion-title"),h.zc(5," Mis Viajes "),h.Ob(),h.Ob(),h.Kb(6,"app-user-menu"),h.Ob(),h.Pb(7,"ion-content",1),h.Pb(8,"p-table",2,3),h.xc(10,S,39,0,"ng-template",4),h.xc(11,I,32,10,"ng-template",5),h.Ob(),h.Ob()),2&t&&(h.yb(8),h.fc("columns",e.cols)("value",e.viajes)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",h.hc(6,k)))},directives:[a.m,a.E,a.d,a.x,a.D,w.a,a.g,X.e,A.b,X.d,X.c,D.a],pipes:[i.d],styles:["[_nghost-%COMP%]     .p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{display:none}.p-d-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.action-column[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width:40rem){[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td{text-align:left;display:block;width:100%;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4em 1em -.4em -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}"]}),t})()}];let K=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(F)],c.i]}),t})();var J=n("arFO"),T=n("m/q5");let Z=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(e){return new(e||t)},imports:[[i.b,o.e,a.G,K,X.f,J.b,D.b,T.a]]}),t})()}}]);