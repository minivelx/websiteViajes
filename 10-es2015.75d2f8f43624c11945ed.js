(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{TDBs:function(t,e,a){"use strict";a.r(e),a.d(e,"DashboardPageModule",(function(){return z}));var n=a("ofXK"),o=a("3Pt+"),r=a("TEn/"),i=a("tyNb"),l=a("qb46"),s=a.n(l),c=a("fXoL"),u=a("RyMC"),d=a("rEr+"),b=a("7zfz"),p=a("I5S5"),f=a("arFO");function h(t,e){if(1&t&&(c.Pb(0,"span"),c.zc(1),c.Ob()),2&t){const t=e.$implicit;c.yb(1),c.Ac(t.label)}}function y(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"th",13),c.zc(2,"Placa "),c.Kb(3,"p-sortIcon",14),c.Ob(),c.Pb(4,"th",15),c.zc(5,"Cliente "),c.Kb(6,"p-sortIcon",16),c.Ob(),c.Pb(7,"th",17),c.zc(8,"Estado Ruta "),c.Kb(9,"p-sortIcon",18),c.Ob(),c.Ob(),c.Pb(10,"tr"),c.Pb(11,"th"),c.Pb(12,"input",19),c.Xb("input",(function(e){return c.rc(t),c.Zb(),c.pc(13).filter(e.target.value,"placa","contains")})),c.Ob(),c.Ob(),c.Pb(13,"th"),c.Pb(14,"input",20),c.Xb("input",(function(e){return c.rc(t),c.Zb(),c.pc(13).filter(e.target.value,"cliente","contains")})),c.Ob(),c.Ob(),c.Pb(15,"th"),c.Pb(16,"p-dropdown",21),c.Xb("onChange",(function(e){return c.rc(t),c.Zb(),c.pc(13).filter(e.value,"estadoRuta","equals")})),c.xc(17,h,2,1,"ng-template",22),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=c.Zb();c.yb(16),c.fc("options",t.estadosRuta)("showClear",!0)}}function x(t,e){if(1&t&&(c.Pb(0,"tr"),c.Pb(1,"td"),c.Pb(2,"span",23),c.zc(3,"Placa "),c.Ob(),c.zc(4),c.Ob(),c.Pb(5,"td"),c.Pb(6,"span",23),c.zc(7,"Cliente "),c.Ob(),c.zc(8),c.Ob(),c.Pb(9,"td"),c.Pb(10,"span",23),c.zc(11,"Estado Ruta "),c.Ob(),c.zc(12),c.Ob(),c.Ob()),2&t){const t=e.$implicit;c.yb(4),c.Ac(t.placa),c.yb(4),c.Ac(t.cliente),c.yb(4),c.Ac(0==t.estadoRuta?"Inicio":1==t.estadoRuta?"Transito":"Finalizado")}}function v(t,e){if(1&t&&(c.Pb(0,"span"),c.zc(1),c.Ob()),2&t){const t=e.$implicit;c.yb(1),c.Ac(t.label)}}function g(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"th",13),c.zc(2,"Placa "),c.Kb(3,"p-sortIcon",14),c.Ob(),c.Pb(4,"th",15),c.zc(5,"Cliente "),c.Kb(6,"p-sortIcon",16),c.Ob(),c.Pb(7,"th",17),c.zc(8,"Estado Ruta "),c.Kb(9,"p-sortIcon",18),c.Ob(),c.Ob(),c.Pb(10,"tr"),c.Pb(11,"th"),c.Pb(12,"input",19),c.Xb("input",(function(e){return c.rc(t),c.Zb(),c.pc(20).filter(e.target.value,"placa","contains")})),c.Ob(),c.Ob(),c.Pb(13,"th"),c.Pb(14,"input",20),c.Xb("input",(function(e){return c.rc(t),c.Zb(),c.pc(20).filter(e.target.value,"cliente","contains")})),c.Ob(),c.Ob(),c.Pb(15,"th"),c.Pb(16,"p-dropdown",21),c.Xb("onChange",(function(e){return c.rc(t),c.Zb(),c.pc(20).filter(e.value,"estadoRuta","equals")})),c.xc(17,v,2,1,"ng-template",22),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=c.Zb();c.yb(16),c.fc("options",t.estadosRuta)("showClear",!0)}}function m(t,e){if(1&t&&(c.Pb(0,"tr"),c.Pb(1,"td"),c.Pb(2,"span",23),c.zc(3,"Placa "),c.Ob(),c.zc(4),c.Ob(),c.Pb(5,"td"),c.Pb(6,"span",23),c.zc(7,"Cliente "),c.Ob(),c.zc(8),c.Ob(),c.Pb(9,"td"),c.Pb(10,"span",23),c.zc(11,"Estado Ruta "),c.Ob(),c.zc(12),c.Ob(),c.Ob()),2&t){const t=e.$implicit;c.yb(4),c.Ac(t.placa),c.yb(4),c.Ac(t.cliente),c.yb(4),c.Ac(0==t.estadoRuta?"Inicio":1==t.estadoRuta?"Transito":"Finalizado")}}function _(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"th",15),c.zc(2,"Cliente "),c.Kb(3,"p-sortIcon",16),c.Ob(),c.Pb(4,"th",24),c.zc(5,"Numero Viajes "),c.Kb(6,"p-sortIcon",25),c.Ob(),c.Ob(),c.Pb(7,"tr"),c.Pb(8,"th"),c.Pb(9,"input",20),c.Xb("input",(function(e){return c.rc(t),c.Zb(),c.pc(27).filter(e.target.value,"cliente","contains")})),c.Ob(),c.Ob(),c.Pb(10,"th"),c.Pb(11,"input",26),c.Xb("input",(function(e){return c.rc(t),c.Zb(),c.pc(27).filter(e.target.value,"numeroViajes","contains")})),c.Ob(),c.Ob(),c.Ob()}}function P(t,e){if(1&t&&(c.Pb(0,"tr"),c.Pb(1,"td"),c.Pb(2,"span",23),c.zc(3,"Cliente "),c.Ob(),c.zc(4),c.Ob(),c.Pb(5,"td"),c.Pb(6,"span",23),c.zc(7,"Numero Viajes "),c.Ob(),c.zc(8),c.Ob(),c.Ob()),2&t){const t=e.$implicit;c.yb(4),c.Ac(t.cliente),c.yb(4),c.Ac(t.numeroViajes)}}const O=function(){return[10,25,50]},w=[{path:"",component:(()=>{class t{constructor(){this.plugin=s.a,this.data={labels:["Activos","Inactivos"],datasets:[{data:[90,10],backgroundColor:["#496427","#a29fa0"],hoverBackgroundColor:["#496427","#a29fa0"]}]},this.estadosRuta=[{label:"Inicio",value:"0"},{label:"Transito",value:"1"},{label:"Finalizado",value:"2"}],this.vehiculos=[{placa:"OMP888",cliente:"Femsa",estadoRuta:0},{placa:"ABC123",cliente:"Plasticos S.A.",estadoRuta:1},{placa:"TMZ274",cliente:"Femsa",estadoRuta:2}],this.indicadores=[{cliente:"Femsa",numeroViajes:4},{cliente:"Plasticos S.A.",numeroViajes:2}],this.options={tooltips:{enabled:!1},plugins:{datalabels:{formatter:(t,e)=>{let a=e.chart.data.datasets;if(a.indexOf(e.dataset)===a.length-1){let e=a[0].data.reduce((t,e)=>t+e,0);return Math.round(t/e*100)+"% - "+t}return t},color:"#FFF"}}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Db({type:t,selectors:[["app-dashboard"]],decls:35,vars:20,consts:[["slot","start"],[1,"dashboard-content"],[1,"vehiculos-propios-container"],["styleClass","p-datatable-striped p-datatable-responsive-demo","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dtPropios",""],["pTemplate","header"],["pTemplate","body"],[1,"vehiculos-terceros-container"],["dtTerceros",""],[1,"indicadores-container"],["dtIndicadores",""],[1,"ocupacion-flota-container"],["type","pie","width","50vh","height","50vh",3,"data","options"],["pSortableColumn","placa"],["field","placa"],["pSortableColumn","cliente"],["field","cliente"],["pSortableColumn","estadoRuta"],["field","estadoRuta"],["pInputText","","type","text","placeholder","Buscar por Placa",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Cliente",1,"p-column-filter",3,"input"],["styleClass","p-column-filter","placeholder","Buscar por Estado Ruta",3,"options","showClear","onChange"],["pTemplate","item"],[1,"p-column-title"],["pSortableColumn","numeroViajes"],["field","numeroViajes"],["pInputText","","type","text","placeholder","Buscar por Numero Viajes",1,"p-column-filter",3,"input"]],template:function(t,e){1&t&&(c.Pb(0,"ion-header"),c.Pb(1,"ion-toolbar"),c.Pb(2,"ion-buttons",0),c.Kb(3,"ion-menu-button"),c.Ob(),c.Pb(4,"ion-title"),c.zc(5," Dashboard "),c.Ob(),c.Ob(),c.Kb(6,"app-user-menu"),c.Ob(),c.Pb(7,"ion-content"),c.Pb(8,"div",1),c.Pb(9,"div",2),c.Pb(10,"ion-title"),c.zc(11," Vehiculos Propios "),c.Ob(),c.Pb(12,"p-table",3,4),c.xc(14,y,18,2,"ng-template",5),c.xc(15,x,13,3,"ng-template",6),c.Ob(),c.Ob(),c.Pb(16,"div",7),c.Pb(17,"ion-title"),c.zc(18," Vehiculos Terceros "),c.Ob(),c.Pb(19,"p-table",3,8),c.xc(21,g,18,2,"ng-template",5),c.xc(22,m,13,3,"ng-template",6),c.Ob(),c.Ob(),c.Pb(23,"div",9),c.Pb(24,"ion-title"),c.zc(25," Indicadores "),c.Ob(),c.Pb(26,"p-table",3,10),c.xc(28,_,12,0,"ng-template",5),c.xc(29,P,9,2,"ng-template",6),c.Ob(),c.Ob(),c.Pb(30,"div",11),c.Pb(31,"ion-title"),c.zc(32," Ocupaci\xf3n Flota Propia "),c.Ob(),c.Pb(33,"div"),c.Kb(34,"p-chart",12),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.yb(12),c.fc("value",e.vehiculos)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",c.hc(17,O)),c.yb(7),c.fc("value",e.vehiculos)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",c.hc(18,O)),c.yb(7),c.fc("value",e.indicadores)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",c.hc(19,O)),c.yb(8),c.fc("data",e.data)("options",e.options))},directives:[r.m,r.E,r.d,r.x,r.D,u.a,r.g,d.e,b.b,p.b,d.d,d.c,f.a],styles:["[_nghost-%COMP%]     .p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{display:none}.p-d-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.action-column[_ngcontent-%COMP%]{text-align:center!important}.indicadores-container[_ngcontent-%COMP%], .ocupacion-flota-container[_ngcontent-%COMP%], .vehiculos-propios-container[_ngcontent-%COMP%], .vehiculos-terceros-container[_ngcontent-%COMP%]{width:50%}.ocupacion-flota-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.dashboard-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.dashboard-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px}@media screen and (max-width:40rem){[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td{text-align:left;display:block;width:100%;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4em 1em -.4em -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(w)],i.i]}),t})();var M=a("m/q5");let z=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[n.b,o.e,r.G,C,p.a,d.f,f.b,M.a]]}),t})()},qb46:function(t,e,a){t.exports=function(t){"use strict";var e=(t=t&&t.hasOwnProperty("default")?t.default:t).helpers,a=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),n={toTextLines:function(t){var a,n=[];for(t=[].concat(t);t.length;)"string"==typeof(a=t.pop())?n.unshift.apply(n,a.split("\n")):Array.isArray(a)?t.push.apply(t,a):e.isNullOrUndef(t)||n.unshift(""+a);return n},toFontString:function(t){return!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,a){var n,o=[].concat(e),r=o.length,i=t.font,l=0;for(t.font=a.string,n=0;n<r;++n)l=Math.max(t.measureText(o[n]).width,l);return t.font=i,{height:r*a.lineHeight,width:l}},parseFont:function(a){var o=t.defaults.global,r=e.valueOrDefault(a.size,o.defaultFontSize),i={family:e.valueOrDefault(a.family,o.defaultFontFamily),lineHeight:e.options.toLineHeight(a.lineHeight,r),size:r,style:e.valueOrDefault(a.style,o.defaultFontStyle),weight:e.valueOrDefault(a.weight,null),string:""};return i.string=n.toFontString(i),i},bound:function(t,e,a){return Math.max(t,Math.min(e,a))},arrayDiff:function(t,e){var a,n,o,r,i=t.slice(),l=[];for(a=0,o=e.length;a<o;++a)-1===(n=i.indexOf(r=e[a]))?l.push([r,1]):i.splice(n,1);for(a=0,o=i.length;a<o;++a)l.push([i[a],-1]);return l},rasterize:function(t){return Math.round(t*a)/a}};function o(t,e){var a=e.x,n=e.y;if(null===a)return{x:0,y:-1};if(null===n)return{x:1,y:0};var o=t.x-a,r=t.y-n,i=Math.sqrt(o*o+r*r);return{x:i?o/i:0,y:i?r/i:-1}}function r(t,e,a){var n=0;return t<a.left?n|=1:t>a.right&&(n|=2),e<a.top?n|=8:e>a.bottom&&(n|=4),n}function i(t,e){var a,n,o=e.anchor,i=t;return e.clamp&&(i=function(t,e){for(var a,n,o,i=t.x0,l=t.y0,s=t.x1,c=t.y1,u=r(i,l,e),d=r(s,c,e);u|d&&!(u&d);)8&(a=u||d)?(n=i+(s-i)*(e.top-l)/(c-l),o=e.top):4&a?(n=i+(s-i)*(e.bottom-l)/(c-l),o=e.bottom):2&a?(o=l+(c-l)*(e.right-i)/(s-i),n=e.right):1&a&&(o=l+(c-l)*(e.left-i)/(s-i),n=e.left),a===u?u=r(i=n,l=o,e):d=r(s=n,c=o,e);return{x0:i,x1:s,y0:l,y1:c}}(i,e.area)),"start"===o?(a=i.x0,n=i.y0):"end"===o?(a=i.x1,n=i.y1):(a=(i.x0+i.x1)/2,n=(i.y0+i.y1)/2),function(t,e,a,n,o){switch(o){case"center":a=n=0;break;case"bottom":a=0,n=1;break;case"right":a=1,n=0;break;case"left":a=-1,n=0;break;case"top":a=0,n=-1;break;case"start":a=-a,n=-n;break;case"end":break;default:o*=Math.PI/180,a=Math.cos(o),n=Math.sin(o)}return{x:t,y:e,vx:a,vy:n}}(a,n,t.vx,t.vy,e.align)}var l={arc:function(t,e){var a=(t.startAngle+t.endAngle)/2,n=Math.cos(a),o=Math.sin(a),r=t.innerRadius,l=t.outerRadius;return i({x0:t.x+n*r,y0:t.y+o*r,x1:t.x+n*l,y1:t.y+o*l,vx:n,vy:o},e)},point:function(t,e){var a=o(t,e.origin),n=a.x*t.radius,r=a.y*t.radius;return i({x0:t.x-n,y0:t.y-r,x1:t.x+n,y1:t.y+r,vx:a.x,vy:a.y},e)},rect:function(t,e){var a=o(t,e.origin),n=t.x,r=t.y,l=0,s=0;return t.horizontal?(n=Math.min(t.x,t.base),l=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),s=Math.abs(t.base-t.y)),i({x0:n,y0:r+s,x1:n+l,y1:r,vx:a.x,vy:a.y},e)},fallback:function(t,e){var a=o(t,e.origin);return i({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:a.x,vy:a.y},e)}},s=t.helpers,c=n.rasterize;function u(t){var e=t._model.horizontal,a=t._scale||e&&t._xScale||t._yScale;if(!a)return null;if(void 0!==a.xCenter&&void 0!==a.yCenter)return{x:a.xCenter,y:a.yCenter};var n=a.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function d(t,e,a){var n=t.shadowBlur,o=a.stroked,r=c(a.x),i=c(a.y),l=c(a.w);o&&t.strokeText(e,r,i,l),a.filled&&(n&&o&&(t.shadowBlur=0),t.fillText(e,r,i,l),n&&o&&(t.shadowBlur=n))}var b=function(t,e,a,n){var o=this;o._config=t,o._index=n,o._model=null,o._rects=null,o._ctx=e,o._el=a};s.extend(b.prototype,{_modelize:function(e,a,o,r){var i,c=this._index,d=s.options.resolve,b=n.parseFont(d([o.font,{}],r,c)),p=d([o.color,t.defaults.global.defaultFontColor],r,c);return{align:d([o.align,"center"],r,c),anchor:d([o.anchor,"center"],r,c),area:r.chart.chartArea,backgroundColor:d([o.backgroundColor,null],r,c),borderColor:d([o.borderColor,null],r,c),borderRadius:d([o.borderRadius,0],r,c),borderWidth:d([o.borderWidth,0],r,c),clamp:d([o.clamp,!1],r,c),clip:d([o.clip,!1],r,c),color:p,display:e,font:b,lines:a,offset:d([o.offset,0],r,c),opacity:d([o.opacity,1],r,c),origin:u(this._el),padding:s.options.toPadding(d([o.padding,0],r,c)),positioner:(i=this._el,i instanceof t.elements.Arc?l.arc:i instanceof t.elements.Point?l.point:i instanceof t.elements.Rectangle?l.rect:l.fallback),rotation:d([o.rotation,0],r,c)*(Math.PI/180),size:n.textSize(this._ctx,a,b),textAlign:d([o.textAlign,"start"],r,c),textShadowBlur:d([o.textShadowBlur,0],r,c),textShadowColor:d([o.textShadowColor,p],r,c),textStrokeColor:d([o.textStrokeColor,p],r,c),textStrokeWidth:d([o.textStrokeWidth,0],r,c)}},update:function(t){var e,a,o,r=this,i=null,l=null,c=r._index,u=r._config,d=s.options.resolve([u.display,!0],t,c);d&&(a=s.valueOrDefault(s.callback(u.formatter,[e=t.dataset.data[c],t]),e),(o=s.isNullOrUndef(a)?[]:n.toTextLines(a)).length&&(l=function(t){var e=t.borderWidth||0,a=t.padding,n=t.size.height,o=t.size.width,r=-o/2,i=-n/2;return{frame:{x:r-a.left-e,y:i-a.top-e,w:o+a.width+2*e,h:n+a.height+2*e},text:{x:r,y:i,w:o,h:n}}}(i=r._modelize(d,o,u,t)))),r._model=i,r._rects=l},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var a,o=t.ctx,r=this._model,i=this._rects;this.visible()&&(o.save(),r.clip&&(a=r.area,o.beginPath(),o.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),o.clip()),o.globalAlpha=n.bound(0,r.opacity,1),o.translate(c(e.x),c(e.y)),o.rotate(r.rotation),function(t,e,a){var n=a.backgroundColor,o=a.borderColor,r=a.borderWidth;(n||o&&r)&&(t.beginPath(),s.canvas.roundedRect(t,c(e.x)+r/2,c(e.y)+r/2,c(e.w)-r,c(e.h)-r,a.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),o&&r&&(t.strokeStyle=o,t.lineWidth=r,t.lineJoin="miter",t.stroke()))}(o,i.frame,r),function(t,e,a,n){var o,r=n.textAlign,i=n.color,l=!!i,s=n.font,c=e.length,u=n.textStrokeColor,b=n.textStrokeWidth,p=u&&b;if(c&&(l||p))for(a=function(t,e,a){var n=a.lineHeight,o=t.w,r=t.x;return"center"===e?r+=o/2:"end"!==e&&"right"!==e||(r+=o),{h:n,w:o,x:r,y:t.y+n/2}}(a,r,s),t.font=s.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,l&&(t.fillStyle=i),p&&(t.lineJoin="round",t.lineWidth=b,t.strokeStyle=u),o=0,c=e.length;o<c;++o)d(t,e[o],{stroked:p,filled:l,w:a.w,x:a.x,y:a.y+a.h*o})}(o,r.lines,i.text,r),o.restore())}});var p=Number.MIN_SAFE_INTEGER||-9007199254740991,f=Number.MAX_SAFE_INTEGER||9007199254740991;function h(t,e,a){var n=Math.cos(a),o=Math.sin(a),r=e.x,i=e.y;return{x:r+n*(t.x-r)-o*(t.y-i),y:i+o*(t.x-r)+n*(t.y-i)}}function y(t,e){var a,n,o,r=f,i=p,l=e.origin;for(a=0;a<t.length;++a)o=e.vx*((n=t[a]).x-l.x)+e.vy*(n.y-l.y),r=Math.min(r,o),i=Math.max(i,o);return{min:r,max:i}}function x(t,e){var a=e.x-t.x,n=e.y-t.y,o=Math.sqrt(a*a+n*n);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var v=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function g(t,e,a){var n=e.positioner(t,e),o=n.vx,r=n.vy;if(!o&&!r)return{x:n.x,y:n.y};var i=a.w,l=a.h,s=e.rotation,c=Math.abs(i/2*Math.cos(s))+Math.abs(l/2*Math.sin(s)),u=Math.abs(i/2*Math.sin(s))+Math.abs(l/2*Math.cos(s)),d=1/Math.max(Math.abs(o),Math.abs(r));return c*=o*d,u*=r*d,{x:n.x+(c+=e.offset*o),y:n.y+(u+=e.offset*r)}}t.helpers.extend(v.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,a){this._rotation=a,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=h(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,a,n,o=this._points(),r=t._points(),i=[x(o[0],o[1]),x(o[0],o[3])];for(this._rotation!==t._rotation&&i.push(x(r[0],r[1]),x(r[0],r[3])),e=0;e<i.length;++e)if(a=y(o,i[e]),n=y(r,i[e]),a.max<n.min||n.max<a.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,a=this.center();return[h({x:t.x,y:t.y},a,e),h({x:t.x+t.w,y:t.y},a,e),h({x:t.x+t.w,y:t.y+t.h},a,e),h({x:t.x,y:t.y+t.h},a,e)]}});var m={prepare:function(t){var e,a,n,o,r,i=[];for(e=0,n=t.length;e<n;++e)for(a=0,o=t[e].length;a<o;++a)i.push(r=t[e][a]),r.$layout={_box:new v,_hidable:!1,_visible:!0,_set:e,_idx:a};return i.sort((function(t,e){var a=t.$layout,n=e.$layout;return a._idx===n._idx?n._set-a._set:n._idx-a._idx})),this.update(i),i},update:function(t){var e,a,n,o,r,i=!1;for(e=0,a=t.length;e<a;++e)o=(n=t[e]).model(),(r=n.$layout)._hidable=o&&"auto"===o.display,r._visible=n.visible(),i|=r._hidable;i&&function(t){var e,a,n,o,r,i;for(e=0,a=t.length;e<a;++e)(o=(n=t[e]).$layout)._visible&&(r=n.geometry(),i=g(n._el._model,n.model(),r),o._box.update(i,r,n.rotation()));!function(t,e){var a,n,o,r;for(a=t.length-1;a>=0;--a)for(o=t[a].$layout,n=a-1;n>=0&&o._visible;--n)(r=t[n].$layout)._visible&&o._box.intersects(r._box)&&e(o,r)}(t,(function(t,e){var a=t._hidable,n=e._hidable;a&&n||n?e._visible=!1:a&&(t._visible=!1)}))}(t)},lookup:function(t,e){var a,n;for(a=t.length-1;a>=0;--a)if((n=t[a].$layout)&&n._visible&&n._box.contains(e))return t[a];return null},draw:function(t,e){var a,n,o,r,i,l;for(a=0,n=e.length;a<n;++a)(r=(o=e[a]).$layout)._visible&&(i=o.geometry(),l=g(o._el._view,o.model(),i),r._box.update(l,i,o.rotation()),o.draw(t,l))}},_=t.helpers,P=t.helpers;function O(t,e,a){if(e){var n,o=a.$context,r=a.$groups;e[r._set]&&(n=e[r._set][r._key])&&!0===P.callback(n,[o])&&(t.$datalabels._dirty=!0,a.update(o))}}t.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(_.isNullOrUndef(t))return null;var e,a,n,o=t;if(_.isObject(t))if(_.isNullOrUndef(t.label))if(_.isNullOrUndef(t.r))for(o="",n=0,a=(e=Object.keys(t)).length;n<a;++n)o+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else o=t.r;else o=t.label;return""+o},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var w={id:"datalabels",beforeInit:function(t){t.$datalabels={_actives:[]}},beforeUpdate:function(t){var e=t.$datalabels;e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,a){var n,o,r,i,l,s,c,u,d=e.index,p=t.$datalabels,f=p._datasets[d]=[],h=t.isDatasetVisible(d),y=t.data.datasets[d],x=function(t,e){var a,n,o=t.datalabels,r={},i=[];return!1===o?null:(!0===o&&(o={}),e=P.merge({},[e,o]),a=e.labels||{},n=Object.keys(a),delete e.labels,n.length?n.forEach((function(t){a[t]&&i.push(P.merge({},[e,a[t],{_key:t}]))})):i.push(e),r=i.reduce((function(t,e){return P.each(e.listeners||{},(function(a,n){t[n]=t[n]||{},t[n][e._key||"$default"]=a})),delete e.listeners,t}),{}),{labels:i,listeners:r})}(y,a),v=e.meta.data||[],g=t.ctx;for(g.save(),n=0,r=v.length;n<r;++n)if((c=v[n]).$datalabels=[],h&&c&&!c.hidden&&!c._model.skip)for(o=0,i=x.labels.length;o<i;++o)s=(l=x.labels[o])._key,(u=new b(l,g,c,n)).$groups={_set:d,_key:s||"$default"},u.$context={active:!1,chart:t,dataIndex:n,dataset:y,datasetIndex:d},u.update(u.$context),c.$datalabels.push(u),f.push(u);g.restore(),P.merge(p._listeners,x.listeners,{merger:function(t,a,n){a[t]=a[t]||{},a[t][e.index]=n[t],p._listened=!0}})},afterUpdate:function(t,e){t.$datalabels._labels=m.prepare(t.$datalabels._datasets,e)},afterDatasetsDraw:function(t){m.draw(t,t.$datalabels._labels)},beforeEvent:function(t,e){if(t.$datalabels._listened)switch(e.type){case"mousemove":case"mouseout":!function(t,e){var a,n,o=t.$datalabels,r=o._listeners;if(r.enter||r.leave){if("mousemove"===e.type)n=m.lookup(o._labels,e);else if("mouseout"!==e.type)return;a=o._hovered,o._hovered=n,function(t,e,a,n){var o,r;(a||n)&&(a?n?a!==n&&(r=o=!0):r=!0:o=!0,r&&O(t,e.leave,a),o&&O(t,e.enter,n))}(t,r,a,n)}}(t,e);break;case"click":!function(t,e){var a=t.$datalabels,n=a._listeners.click,o=n&&m.lookup(a._labels,e);o&&O(t,n,o)}(t,e)}},afterEvent:function(e){var a,o,r,i,l,s,c,u=e.$datalabels,d=u._actives,b=u._actives=e.lastActive||[],p=n.arrayDiff(d,b);for(a=0,o=p.length;a<o;++a)if((l=p[a])[1])for(r=0,i=(c=l[0].$datalabels||[]).length;r<i;++r)(s=c[r]).$context.active=1===l[1],s.update(s.$context);(u._dirty||p.length)&&(m.update(u._labels),function(e){if(!e.animating){for(var a=t.animationService.animations,n=0,o=a.length;n<o;++n)if(a[n].chart===e)return;e.render({duration:1,lazy:!0})}}(e)),delete u._dirty}};return t.plugins.register(w),w}(a("MO+k"))}}]);