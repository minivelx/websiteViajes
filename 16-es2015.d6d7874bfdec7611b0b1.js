(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{XQjU:function(e,t,n){"use strict";n.r(t),n.d(t,"ProgramacionViajesPageModule",(function(){return Q}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),c=n("tyNb"),b=n("mrSG"),r=n("+Qoh"),l=n("BsNa"),s=n("G7hY"),u=n("ypJn"),p=n("YxHF"),d=n("BEOd"),h=n("fXoL"),m=n("BQIx"),P=n("ova0"),O=n("+nHt"),g=n("JmBq"),f=n("FdPp");function C(e,t){if(1&e){const e=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.Ac(4,"Clientes"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(17).close()})),h.Kb(6,"ion-icon",18),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function v(e,t){if(1&e){const e=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.Ac(4,"Camiones"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(23).close()})),h.Kb(6,"ion-icon",18),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function y(e,t){if(1&e){const e=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.Ac(4,"Conductores"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(29).close()})),h.Kb(6,"ion-icon",18),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function A(e,t){if(1&e){const e=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.Ac(4,"Auxiliares"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(35).close()})),h.Kb(6,"ion-icon",18),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function x(e,t){if(1&e){const e=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.Ac(4,"Origen"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(41).close()})),h.Kb(6,"ion-icon",18),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}function M(e,t){if(1&e){const e=h.Qb();h.Pb(0,"ion-toolbar"),h.Pb(1,"ion-title"),h.Pb(2,"div",0),h.Pb(3,"span"),h.Ac(4,"Destino"),h.Ob(),h.Pb(5,"ion-button",1),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(47).close()})),h.Kb(6,"ion-icon",18),h.Ob(),h.Ob(),h.Ob(),h.Ob()}}let j=(()=>{class e extends d.a{constructor(e,t,n,i,o){super(e,t,n,i,o),this.getService=e,this.postService=t,this.putService=n,this.toastCtrl=i,this.modalCtrl=o,this.url="viajes",this.urlClientes="clientes/activos",this.urlCamiones="camiones/activos",this.urlConductores="account/listarPorRol/conductor",this.urlAuxiliares="account/listarPorRol/auxiliar",this.urlOrigenDestinoCliente="sedes/PorCliente",this.viaje=new s.a,this.cliente=new l.a,this.camion=new r.a,this.conductor=new p.a,this.auxiliar=new p.a,this.origen=new u.a,this.destino=new u.a,this.clicked=!1}ngOnInit(){this.obtenerClientes(),this.obtenerCamiones(),this.obtenerConductores(),this.obtenerAuxiliares(),null!=this.id&&super.consumirGet(this.url,this.id).then(e=>{this.viaje=e,this.cliente=e.cliente,this.camion=e.camion,this.conductor=e.conductor,this.auxiliar=e.auxiliar,this.origen=e.sedeOrigen,this.destino=e.sedeDestino,this.fecha=e.fecha})}guardar(){return Object(b.a)(this,void 0,void 0,(function*(){this.clicked=!0,null!=this.id?this.actualizarviaje():this.crearviaje()}))}crearviaje(){this.viaje.idCliente=this.cliente.id,this.viaje.idOrigen=this.origen.id,this.viaje.idDestino=this.destino.id,this.viaje.idCamion=this.camion.id,this.viaje.idConductor=this.conductor.id,this.viaje.idAuxiliar=null==this.auxiliar?null:this.auxiliar.id,this.viaje.fecha=this.fecha,console.log(this.viaje),super.consumirPost(this.url,this.viaje).then(e=>{this.clientes=e,this.clicked=!1})}actualizarviaje(){super.consumirPut(this.url,this.id,this.viaje).then(e=>{this.clientes=e,this.clicked=!1})}dismiss(e){this.modalCtrl.dismiss(e)}obtenerClientes(){super.consumirGet(this.urlClientes).then(e=>{this.clientes=e})}obtenerCamiones(){super.consumirGet(this.urlCamiones).then(e=>{this.camiones=e})}obtenerConductores(){super.consumirGet(this.urlConductores).then(e=>{this.conductores=e})}obtenerAuxiliares(){super.consumirGet(this.urlAuxiliares).then(e=>{this.auxiliares=e})}obtenerOrigenesDestinos(){super.consumirGet(this.urlOrigenDestinoCliente,this.cliente.id).then(e=>{this.origenesDestinos=e})}}return e.\u0275fac=function(t){return new(t||e)(h.Jb(m.a),h.Jb(P.a),h.Jb(O.a),h.Jb(a.R),h.Jb(a.K))},e.\u0275cmp=h.Db({type:e,selectors:[["app-detalle-programacion-viajes"]],inputs:{id:"id"},features:[h.vb],decls:63,vars:23,consts:[[1,"modal-title"],["fill","clear","color","dark",3,"click"],["name","close-outline"],[1,"ion-padding"],["placeholder","Fecha Programada","displayFormat","YYYY/MM/DD h:mm A",3,"ngModel","ngModelChange"],["itemValueField","id","itemTextField","nombre",3,"ngModel","items","canSearch","ngModelChange","onChange"],["portComponent",""],["ionicSelectableHeaderTemplate",""],["itemValueField","id","itemTextField","placa",3,"ngModel","items","canSearch","ngModelChange"],["portComponent0",""],["itemValueField","id","itemTextField","nombre",3,"ngModel","items","canSearch","ngModelChange"],["portComponent1",""],["portComponent2",""],["portComponent3",""],["portComponent4",""],["type","number",1,"aling-right",3,"ngModel","ngModelChange"],["type","text",1,"aling-right",3,"ngModel","ngModelChange"],[3,"disabled","click"],["name","close-circle",2,"font-size","24px"]],template:function(e,t){1&e&&(h.Pb(0,"ion-header"),h.Pb(1,"ion-toolbar"),h.Pb(2,"ion-title"),h.Pb(3,"div",0),h.Pb(4,"span"),h.Ac(5,"Maestro Viajes"),h.Ob(),h.Pb(6,"ion-button",1),h.Xb("click",(function(){return t.dismiss(null)})),h.Kb(7,"ion-icon",2),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Pb(8,"ion-content",3),h.Pb(9,"ion-item"),h.Pb(10,"ion-label"),h.Ac(11,"Fecha"),h.Ob(),h.Pb(12,"ion-datetime",4),h.Xb("ngModelChange",(function(e){return t.fecha=e})),h.Ob(),h.Ob(),h.Pb(13,"ion-item"),h.Pb(14,"ion-label"),h.Ac(15,"Cliente"),h.Ob(),h.Pb(16,"ionic-selectable",5,6),h.Xb("ngModelChange",(function(e){return t.cliente=e}))("onChange",(function(){return t.obtenerOrigenesDestinos()})),h.yc(18,C,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(19,"ion-item"),h.Pb(20,"ion-label"),h.Ac(21,"Placa"),h.Ob(),h.Pb(22,"ionic-selectable",8,9),h.Xb("ngModelChange",(function(e){return t.camion=e})),h.yc(24,v,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(25,"ion-item"),h.Pb(26,"ion-label"),h.Ac(27,"Conductor"),h.Ob(),h.Pb(28,"ionic-selectable",10,11),h.Xb("ngModelChange",(function(e){return t.conductor=e})),h.yc(30,y,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(31,"ion-item"),h.Pb(32,"ion-label"),h.Ac(33,"Auxiliar"),h.Ob(),h.Pb(34,"ionic-selectable",10,12),h.Xb("ngModelChange",(function(e){return t.auxiliar=e})),h.yc(36,A,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(37,"ion-item"),h.Pb(38,"ion-label"),h.Ac(39,"Origen"),h.Ob(),h.Pb(40,"ionic-selectable",10,13),h.Xb("ngModelChange",(function(e){return t.origen=e})),h.yc(42,x,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(43,"ion-item"),h.Pb(44,"ion-label"),h.Ac(45,"Destino"),h.Ob(),h.Pb(46,"ionic-selectable",10,14),h.Xb("ngModelChange",(function(e){return t.destino=e})),h.yc(48,M,7,0,"ng-template",7),h.Ob(),h.Ob(),h.Pb(49,"ion-item"),h.Pb(50,"ion-label"),h.Ac(51,"Valor Anticipo"),h.Ob(),h.Pb(52,"ion-input",15),h.Xb("ngModelChange",(function(e){return t.viaje.valorAnticipo=e})),h.Ob(),h.Ob(),h.Pb(53,"ion-item"),h.Pb(54,"ion-label"),h.Ac(55,"N\xfamero Manifiesto"),h.Ob(),h.Pb(56,"ion-input",16),h.Xb("ngModelChange",(function(e){return t.viaje.numeroManifiesto=e})),h.Ob(),h.Ob(),h.Pb(57,"ion-item"),h.Pb(58,"ion-label"),h.Ac(59,"N\xfamero Cuenta"),h.Ob(),h.Pb(60,"ion-input",16),h.Xb("ngModelChange",(function(e){return t.viaje.numeroCuenta=e})),h.Ob(),h.Ob(),h.Pb(61,"ion-button",17),h.Xb("click",(function(){return t.guardar()})),h.Ac(62,"Guardar"),h.Ob(),h.Ob()),2&e&&(h.yb(12),h.gc("ngModel",t.fecha),h.yb(4),h.gc("ngModel",t.cliente)("items",t.clientes)("canSearch",!0),h.yb(6),h.gc("ngModel",t.camion)("items",t.camiones)("canSearch",!0),h.yb(6),h.gc("ngModel",t.conductor)("items",t.conductores)("canSearch",!0),h.yb(6),h.gc("ngModel",t.auxiliar)("items",t.auxiliares)("canSearch",!0),h.yb(6),h.gc("ngModel",t.origen)("items",t.origenesDestinos)("canSearch",!0),h.yb(6),h.gc("ngModel",t.destino)("items",t.origenesDestinos)("canSearch",!0),h.yb(6),h.gc("ngModel",t.viaje.valorAnticipo),h.yb(4),h.gc("ngModel",t.viaje.numeroManifiesto),h.yb(4),h.gc("ngModel",t.viaje.numeroCuenta),h.yb(1),h.gc("disabled",t.clicked))},directives:[a.n,a.F,a.E,a.d,a.o,a.h,a.s,a.v,a.i,a.P,o.h,o.j,g.a,f.a,a.r,a.M,a.Q],styles:[".modal-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.modal-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center}.aling-right[_ngcontent-%COMP%]{text-align:right}"]}),e})();var X=n("RyMC"),w=n("rEr+"),k=n("7zfz"),D=n("jIHw");function S(e,t){if(1&e){const e=h.Qb();h.Pb(0,"div",7),h.Pb(1,"p-button",8),h.Xb("click",(function(){return h.sc(e),h.Zb().mostrarModal(null)})),h.Ob(),h.Pb(2,"p-button",9),h.Xb("click",(function(){return h.sc(e),h.Zb(),h.qc(9).exportCSV()})),h.Ob(),h.Ob()}}function B(e,t){if(1&e){const e=h.Qb();h.Pb(0,"tr"),h.Pb(1,"th",10),h.Ac(2,"Fecha "),h.Kb(3,"p-sortIcon",11),h.Ob(),h.Pb(4,"th",12),h.Ac(5,"Placa "),h.Kb(6,"p-sortIcon",13),h.Ob(),h.Pb(7,"th",14),h.Ac(8,"Conductor "),h.Kb(9,"p-sortIcon",15),h.Ob(),h.Pb(10,"th",16),h.Ac(11,"Auxiliar "),h.Kb(12,"p-sortIcon",17),h.Ob(),h.Pb(13,"th",18),h.Ac(14,"Cliente "),h.Kb(15,"p-sortIcon",19),h.Ob(),h.Pb(16,"th",20),h.Ac(17,"Origen "),h.Kb(18,"p-sortIcon",21),h.Ob(),h.Pb(19,"th",22),h.Ac(20,"Destino "),h.Kb(21,"p-sortIcon",23),h.Ob(),h.Pb(22,"th",24),h.Ac(23,"Desfase "),h.Kb(24,"p-sortIcon",25),h.Ob(),h.Pb(25,"th",26),h.Ac(26,"Acciones"),h.Ob(),h.Ob(),h.Pb(27,"tr"),h.Pb(28,"th"),h.Pb(29,"input",27),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"fecha","contains")})),h.Ob(),h.Ob(),h.Pb(30,"th"),h.Pb(31,"input",28),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"placa","contains")})),h.Ob(),h.Ob(),h.Pb(32,"th"),h.Pb(33,"input",29),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"nombreConductor","contains")})),h.Ob(),h.Ob(),h.Pb(34,"th"),h.Pb(35,"input",30),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"nombreAuxiliar","contains")})),h.Ob(),h.Ob(),h.Pb(36,"th"),h.Pb(37,"input",31),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"nombreCliente","contains")})),h.Ob(),h.Ob(),h.Pb(38,"th"),h.Pb(39,"input",32),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"nombreOrigen","contains")})),h.Ob(),h.Ob(),h.Pb(40,"th"),h.Pb(41,"input",33),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"nombreDestino","contains")})),h.Ob(),h.Ob(),h.Pb(42,"th"),h.Pb(43,"input",34),h.Xb("input",(function(t){return h.sc(e),h.Zb(),h.qc(9).filter(t.target.value,"desfase","contains")})),h.Ob(),h.Ob(),h.Ob()}}function I(e,t){if(1&e){const e=h.Qb();h.Pb(0,"tr"),h.Pb(1,"td"),h.Pb(2,"span",35),h.Ac(3,"Fecha "),h.Ob(),h.Ac(4),h.ac(5,"date"),h.Ob(),h.Pb(6,"td"),h.Pb(7,"span",35),h.Ac(8,"Placa "),h.Ob(),h.Ac(9),h.Ob(),h.Pb(10,"td"),h.Pb(11,"span",35),h.Ac(12,"Conductor "),h.Ob(),h.Ac(13),h.Ob(),h.Pb(14,"td"),h.Pb(15,"span",35),h.Ac(16,"Auxiliar "),h.Ob(),h.Ac(17),h.Ob(),h.Pb(18,"td"),h.Pb(19,"span",35),h.Ac(20,"Cliente "),h.Ob(),h.Ac(21),h.Ob(),h.Pb(22,"td"),h.Pb(23,"span",35),h.Ac(24,"Origen "),h.Ob(),h.Ac(25),h.Ob(),h.Pb(26,"td"),h.Pb(27,"span",35),h.Ac(28,"Destino "),h.Ob(),h.Ac(29),h.Ob(),h.Pb(30,"td"),h.Pb(31,"span",35),h.Ac(32,"Desfase "),h.Ob(),h.Ac(33),h.Ob(),h.Pb(34,"td",36),h.Pb(35,"p-button",37),h.Xb("click",(function(){h.sc(e);const n=t.$implicit;return h.Zb().mostrarModal(n.id)})),h.Ob(),h.Ob(),h.Ob()}if(2&e){const e=t.$implicit;h.yb(4),h.Bc(h.cc(5,8,e.fecha,"dd/MM/yyyy h:mm")),h.yb(5),h.Bc(e.placa),h.yb(4),h.Bc(e.nombreConductor),h.yb(4),h.Bc(e.nombreAuxiliar),h.yb(4),h.Bc(e.nombreCliente),h.yb(4),h.Bc(e.nombreOrigen),h.yb(4),h.Bc(e.nombreDestino),h.yb(4),h.Bc(e.desfase)}}const K=function(){return[10,25,50]},F=[{path:"",component:(()=>{class e extends d.a{constructor(e,t,n){super(e,null,null,t,n),this.getService=e,this.toastCtrl=t,this.modalCtrl=n,this.url="viajes"}ngOnInit(){this.obtenerViajes()}obtenerViajes(){super.consumirGet(this.url).then(e=>{this.viajes=e})}mostrarModal(e){return Object(b.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:j,componentProps:{id:e},backdropDismiss:!1,cssClass:"long-modal"});t.present(),yield t.onWillDismiss().then(e=>{null!=e.data&&e.data.success&&this.obtenerViajes()})}))}}return e.\u0275fac=function(t){return new(t||e)(h.Jb(m.a),h.Jb(a.R),h.Jb(a.K))},e.\u0275cmp=h.Db({type:e,selectors:[["app-programacion-viajes"]],features:[h.vb],decls:13,vars:7,consts:[["slot","start"],[1,"ion-padding"],["exportFilename","viajes","styleClass","p-datatable-striped p-datatable-responsive-demo","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros",3,"columns","value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["label","Agregar Nuevo","icon","pi pi-plus","iconPos","left",3,"click"],["label","Exportar a CSV","icon","pi pi-file-o","iconPos","left",3,"click"],["pSortableColumn","fecha"],["field","fecha"],["pSortableColumn","placa"],["field","placa"],["pSortableColumn","nombreConductor"],["field","nombreConductor"],["pSortableColumn","nombreAuxiliar"],["field","nombreAuxiliar"],["pSortableColumn","nombreCliente"],["field","nombreCliente"],["pSortableColumn","nombreOrigen"],["field","nombreOrigen"],["pSortableColumn","nombreDestino"],["field","nombreDestino"],["pSortableColumn","desfase"],["field","desfase"],["rowspan","2",1,"action-column"],["pInputText","","type","text","placeholder","Buscar por Fecha",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Placa",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Conductor",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Auxiliar",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Cliente",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Origen",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Destino",1,"p-column-filter",3,"input"],["pInputText","","type","text","placeholder","Buscar por Desfase",1,"p-column-filter",3,"input"],[1,"p-column-title"],[1,"action-column"],["label","Editar","icon","pi pi-pencil","iconPos","left",1,"primary-button",3,"click"]],template:function(e,t){1&e&&(h.Pb(0,"ion-header"),h.Pb(1,"ion-toolbar"),h.Pb(2,"ion-buttons",0),h.Kb(3,"ion-menu-button"),h.Ob(),h.Pb(4,"ion-title"),h.Ac(5," Programaci\xf3n Viajes "),h.Ob(),h.Ob(),h.Kb(6,"app-user-menu"),h.Ob(),h.Pb(7,"ion-content",1),h.Pb(8,"p-table",2,3),h.yc(10,S,3,0,"ng-template",4),h.yc(11,B,44,0,"ng-template",5),h.yc(12,I,36,11,"ng-template",6),h.Ob(),h.Ob()),2&e&&(h.yb(8),h.gc("columns",t.cols)("value",t.viajes)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",h.ic(6,K)))},directives:[a.n,a.F,a.e,a.y,a.E,X.a,a.h,w.e,k.b,D.a,w.d,w.c],pipes:[i.e],styles:["[_nghost-%COMP%]     .p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{display:none}.p-d-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.action-column[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width:40rem){[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td{text-align:left;display:block;width:100%;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4em 1em -.4em -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-responsive-demo .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}"]}),e})()}];let q=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(F)],c.j]}),e})();var T=n("arFO"),Z=n("m/q5");let Q=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(t){return new(t||e)},imports:[[i.b,o.e,a.H,q,w.f,T.b,D.b,Z.a]]}),e})()}}]);